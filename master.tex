\documentclass[twoside]{report}
\usepackage[USenglish]{babel}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage{titling}
\usepackage[sfdefault]{roboto} % Roboto - jde na něj koukat, a funguje ve Windows i Linuxu
\usepackage[setpagesize=false, 
            unicode=false, 
            colorlinks=true, 
            urlcolor=blue, 
            linkcolor=black]{hyperref} 
\usepackage[a4paper, 
            left=2cm,
            right=2cm,
            top=2.5cm,
            bottom=2.5cm,
            footskip=1.25cm]{geometry}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}
\usepackage{multirow}
\usepackage[table]{xcolor}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{etoolbox}

$if(highlighting-macros)$
$highlighting-macros$
$endif$

\setmonofont[ % font fira code - pro správné ligatury v kódu <- etc...
  Contextuals={Alternate}
]{Fira Code}

\makeatletter
\def\verbatim@nolig@list{}
\makeatother

\setlength{\parindent}{0pt}
\setlength{\parskip}{1em plus 2pt minus 1pt}
\setlength{\emergencystretch}{3em} % prevent overfull lines

\patchcmd{\figure}{\normalsize}{\normalsize\centering}{}{} % vycentrovaný obrázek

\newcommand{\Nazev}{$if(title)$ {$title$} $else$ {Bezejmenný report} $endif$} % Název reportu (nebo hláška, že není)
\newcommand{\Podtitul}{$if(subtitle)${\itshape\vskip .2cm $subtitle$}$endif$} % Podtitulek (nebo nic)

\newcommand{\Paticka}{$if(project)$ {$project$} $endif$ $if(version)$ { $version$} $endif$ $if(date)$ { $date$} $endif$} % patička - když projekt tak projekt, když verze tak verze, když datum tak datum; mezi tím mezera

\renewcommand{\baselinestretch}{1.05} % menší, ale platné mezery mezi řádky 

\providecommand{\tightlist}{\setlength{\parskip}{0pt}} % definovat \tightlist, aby pandoc nepadal...

\pagestyle{fancy}

\makeatletter % bez číslování nadpisů (sekcí)
\renewcommand{\@seccntformat}[1]{}
\makeatother

\addto\captionsczech{\renewcommand{\figurename}{Obr.}} % Obrázek je pro děti...
\raggedbottom % aby obrázek nerozhodil předchozí stránku...

% aby fungovaly reference...
$if(csl-refs)$
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1 \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces\fi
  % set entry spacing
  \ifnum #2 > 0
  \setlength{\parskip}{#2\baselineskip}
  \fi
 }%
 {}
\usepackage{calc} % for \widthof, \maxof
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\maxof{\widthof{#1}}{\csllabelwidth}}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth}{#1}}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}
$endif$

\begin{document}

\fancyhf{} % sets both header and footer to nothing
\renewcommand{\headrulewidth}{0pt} % pryč se zbytečnou čárou!

\fancyfoot[RE,RO]{\footnotesize\textit\thepage} % vnější patička - číslo stránky
\fancyfoot[CE,CO]{} % prostřední patička - prázdná
\fancyfoot[LE,LO]{\footnotesize\textit\Paticka} % vnitřní patička - verze a datum v závorce

\begin{center} % titulek s podtržítkem
\fontseries{bx}{\LARGE\Nazev} 
\fontseries{bx}{\large\Podtitul} 
\end{center}
\vspace{-17pt}\noindent\hfil\rule{.8\textwidth}{.25pt}\hfil % podtržení pod titulkem, ne přes celou stranu a ne moc tlusté


$body$ % vlastní text z Markdownu

\end{document} 
